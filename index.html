<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <!-- Temporarily disabling CSP to test video loading -->
    <!--
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; img-src 'self' data: https: http: blob: https://my-song-library-media.s3.amazonaws.com https://my-song-library-media.s3.eu-west-2.amazonaws.com https://*.s3.amazonaws.com https://*.s3.eu-west-2.amazonaws.com; media-src 'self' https: http: blob: https://my-song-library-media.s3.amazonaws.com https://my-song-library-media.s3.eu-west-2.amazonaws.com https://*.s3.amazonaws.com https://*.s3.eu-west-2.amazonaws.com; font-src 'self' data: https://fonts.gstatic.com https://maxcdn.bootstrapcdn.com; connect-src 'self' https: http: https://my-song-library-media.s3.amazonaws.com https://my-song-library-media.s3.eu-west-2.amazonaws.com https://*.s3.amazonaws.com https://*.s3.eu-west-2.amazonaws.com; script-src 'self' 'unsafe-inline' 'unsafe-eval' https:; style-src 'self' 'unsafe-inline' https:;"
    />
    -->
    <link rel="icon" type="image/png" href="/songBankLogo.png" />
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />

    <!-- PWA Meta Tags -->
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
    />
    <meta name="theme-color" content="#000000" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta name="apple-mobile-web-app-title" content="SongLibrary" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="msapplication-TileColor" content="#000000" />
    <meta name="msapplication-tap-highlight" content="no" />
    
    <!-- Enhanced PWA Meta Tags -->
    <meta name="application-name" content="SongLibrary" />
    <meta name="msapplication-config" content="/browserconfig.xml" />
    <meta name="msapplication-TileImage" content="/songBankLogo.png" />

    <!-- PWA Icons -->
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="mask-icon" href="/masked-icon.svg" color="#000000" />

    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.webmanifest" />

    <style>
      /* Force dark mode immediately */
      html,
      body {
        background-color: #000000 !important;
        color: white !important;
      }
      * {
        transition: none !important;
      }

      /* PWA specific styles */
      @media (display-mode: standalone) {
        body {
          padding-top: env(safe-area-inset-top);
          padding-bottom: env(safe-area-inset-bottom);
          padding-left: env(safe-area-inset-left);
          padding-right: env(safe-area-inset-right);
        }
      }

      /* Prevent zoom on input focus for iOS */
      input,
      textarea,
      select {
        font-size: 16px !important;
      }
    </style>
    <title>SongLibrary - Sheet Music Library</title>
    <script>
      // Chakra UI Color Mode Script - Prevent Flash
      (function () {
        var storageKey = "chakra-ui-color-mode";
        var colorMode = localStorage.getItem(storageKey);

        // Force dark mode if not set or if it's light
        if (!colorMode || colorMode === "light") {
          localStorage.setItem(storageKey, "dark");
          colorMode = "dark";
        }

        // Apply dark theme immediately
        if (colorMode === "dark") {
          document.documentElement.setAttribute("data-theme", "dark");

          // Safely set styles only if elements exist
          if (document.documentElement) {
            document.documentElement.style.backgroundColor = "#000000";
            document.documentElement.style.color = "white";
          }

          if (document.body) {
            document.body.style.backgroundColor = "#000000";
            document.body.style.color = "white";
          }

          // Add CSS to prevent any light mode flash
          var style = document.createElement("style");
          style.textContent = `
            html, body { 
              background-color: #000000 !important; 
              color: white !important; 
            }
            * { 
              transition: none !important; 
            }
          `;
          document.head.appendChild(style);
        }
      })();
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
